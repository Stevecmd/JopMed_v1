{% extends "base.html" %}

{% block title %}Sign Out - JopMed{% endblock %}

{% block content %}
<div class="log-out-content">
    <h1>Sign Out</h1>
    <p>Laters!...</p>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        fetch('/api/logout', {
            method: 'POST',
            credentials: 'include'
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                sessionStorage.removeItem('user_id');
                window.location.href = '/';
            } else {
                alert(data.error || 'Logout failed. Please try again.');
            }
        })
        .catch(error => console.error('Error:', error));
    });
</script>
{% endblock %}